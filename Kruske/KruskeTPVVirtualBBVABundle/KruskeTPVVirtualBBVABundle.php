<?phpnamespace Kruske\KruskeTPVVirtualBBVABundle; use Symfony\Component\HttpKernel\Bundle\Bundle;class KruskeTPVVirtualBBVABundle extends Bundle{        public function showForm($container, $amount, $idPedido, $uipay)    {        $order=  str_pad($idPedido, 10, "0",STR_PAD_LEFT);        $variableiupay="";                if($uipay){            $variableiupay="<input type=hidden name=Ds_Merchant_PayMethods value='O'>";        }                $form="            <form id='PagoBBVA' name=compra action='".$container->getParameter('kruske_tpv_virtual_bbva.url_tpv')."' method='post'>               $variableiupay            <input type=hidden name=Ds_Merchant_Amount value='$amount'>            <input type=hidden name=Ds_Merchant_Currency value='".$container->getParameter('kruske_tpv_virtual_bbva.currency_tpv')."'>            <input type=hidden name=Ds_Merchant_Order  value='$order'>            <input type=hidden name=Ds_Merchant_MerchantCode value='".$container->getParameter('kruske_tpv_virtual_bbva.code_tpv')."'>            <input type=hidden name=Ds_Merchant_Terminal value='".$container->getParameter('kruske_tpv_virtual_bbva.terminal_tpv')."'>            <input type=hidden name=Ds_Merchant_TransactionType value='".$container->getParameter('kruske_tpv_virtual_bbva.transaction_type_tpv')."'>            <input type=hidden name=Ds_Merchant_UrlKO value='http://www.accionvinilo.com/carro-final/".$idPedido."'>            <input type=hidden name=Ds_Merchant_UrlOK value='http://www.accionvinilo.com/carro-final/".$idPedido."'>            <input type=hidden name=Ds_Merchant_MerchantURL value='".$container->getParameter('kruske_tpv_virtual_bbva.url_merchant_tpv')."'>";             // Compute hash to sign form data            $message = $amount.$order.$container->getParameter('kruske_tpv_virtual_bbva.code_tpv').$container->getParameter('kruske_tpv_virtual_bbva.currency_tpv').$container->getParameter('kruske_tpv_virtual_bbva.transaction_type_tpv').$container->getParameter('kruske_tpv_virtual_bbva.url_merchant_tpv').$container->getParameter('kruske_tpv_virtual_bbva.clave_tpv');            // echo "<input type=hidden name=message value='$message'>";            $signature = strtoupper(sha1($message));            $form.="<input type=hidden name=Ds_Merchant_MerchantSignature value='$signature'>                <script>                    $(document).ready(function(){                        $('#PagoBBVA').submit();                    });                </script>";            return $form;    }    }